# embedded-distributed-database

项目名称：share-nothing framework embedded-distributed-database

项目简介：由一个主机和多个从机进行工作，通过rs485总线进行通信。主机主要负责发送指令和数据可视化，从机主要负责采集数据、存储数据、接受主机命令对数据库进行增删改查。本例中，由于成本有限，仅采用两个从机，但本质上，由于使用总线通信，因而从机数量超过2时，本质上是没有技术差别的。

document:本例中使用ds18b20采集温度数据，与时钟模块的时间数据相结合，加上从机的编号，合成一个字符串，作为一个document。

field:外存分为多个扇区，每个扇区相当于一个field。

总线通信协议：
从机发送数据：
第一位	第二位	第三位	第四位	第五位	第六位	第七位	第八位	第九位
编号	时	时	分	分	秒	秒	温度	温度
例如 312000020 表示三号机在12：00:00时收集到的温度为20摄氏度。
从机接受数据：
第一位	第二位	第三位	第四位	第五位
地址	地址	地址	命令种类	编号
其中命令种类分为：1（读当前数据），2（查询数据），3（更改数据），4（删除数据）
例如12033,表示更改3号从机存于120地址的数据（默认是改成0，可以根据实际需求重新设计）。
主机的发送和接受协议与从机的正好相反。


为什么选用rs485总线通信？
保证通信的高效和稳定，传统的串口通信通信速度慢，并口通信容易受到干扰。

为什么使用外存？
外存的空间更大，且模块自带扇区和较强的清楚数据功能，方便开发。

不足之处：1、杜邦线连接有接触不好的情况。
          2、使用的硬件过多，单片机负重较大，例如IIC可能改用模拟会更好。
